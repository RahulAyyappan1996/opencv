"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate";
exports.ids = ["pages/api/generate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/generate.ts */ \"(api)/./pages/api/generate.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate\",\n        pathname: \"/api/generate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4wLjRfQGJhYmVsK2NvcmVANy4yMy43X3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmdlbmVyYXRlLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxtREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsbURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtcGxhdGUvP2JmNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9nZW5lcmF0ZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/helperPrompts.ts":
/*!******************************!*\
  !*** ./lib/helperPrompts.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSummaryPrompt: () => (/* binding */ getSummaryPrompt)\n/* harmony export */ });\nfunction getSummaryPrompt(cv, type) {\n    let prompt = \"\";\n    if (cv.roleApplying) {\n        prompt += `Role Applying For: ${cv.roleApplying}\\n`;\n    }\n    if (cv.skills.length > 0) {\n        prompt += `Skills:`;\n        cv.skills.forEach((skill, i)=>{\n            prompt += `${skill.name}${i === cv.skills.length - 1 ? \".\" : \",\"}`;\n        });\n        prompt += `\\n`;\n    }\n    if (cv.experiences.length > 0) {\n        prompt += `Experiences:\\n`;\n        cv.experiences.forEach((experience)=>{\n            prompt += `${experience.position} at ${experience.company} from ${experience.date.from} to ${experience.date.to}\\n`;\n        });\n    }\n    if (cv.educations.length > 0) {\n        prompt += `Educations:\\n`;\n        cv.educations.forEach((education)=>{\n            prompt += `${education.degree} at ${education.school} from ${education.date.from} to ${education.date.to}\\n`;\n        });\n    }\n    if (cv.languages.length > 0) {\n        prompt += `Languages:\\n`;\n        cv.languages.forEach((language)=>{\n            prompt += `${language.name} at ${language.level}\\n`;\n        });\n    }\n    if (cv.description) {\n        prompt += `Description:\\n`;\n        prompt += `${cv.description}\\n`;\n    }\n    if (type === \"summary\") {\n        prompt += `Based on the information above, please write a summary description for this user for this CV. Use first person and write in a professional tone. There might be instances where the user already started writing something so it is your job to continue where he left of and do an amazing job.\\n`;\n        prompt += `Do not fixate as much about previous companies and abstract his experience based on all his job experiences.\\n`;\n        prompt += `Keep the summary short and concise and do not go over 3-4 paragraphs.\\n`;\n    }\n    if (type === \"jobDescription\") {\n        prompt += `Based on the information above, please write a job description for this user for this CV. Use first person and write in a professional tone. There might be instances where the user already started writing something so it is your job to continue where he left of and do an amazing job.\\n`;\n        prompt += `Do not fixate as much about previous companies and abstract his experience based on all his job experiences.\\n`;\n    }\n    if (type === \"educationDescription\") {\n        prompt += `Based on the information above, please write an education description for this user for this CV. Use first person and write in a professional tone. There might be instances where the user already started writing something so it is your job to continue where he left of and do an amazing job.\\n`;\n        prompt += `Do not fixate as much about previous companies and abstract his experience based on all his job experiences.\\n`;\n    }\n    prompt += `Response: `;\n    return prompt;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvaGVscGVyUHJvbXB0cy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsaUJBQ2RDLEVBQU8sRUFDUEMsSUFBMkQ7SUFFM0QsSUFBSUMsU0FBUztJQUViLElBQUlGLEdBQUdHLFlBQVksRUFBRTtRQUNuQkQsVUFBVSxDQUFDLG1CQUFtQixFQUFFRixHQUFHRyxZQUFZLENBQUMsRUFBRSxDQUFDO0lBQ3JEO0lBRUEsSUFBSUgsR0FBR0ksTUFBTSxDQUFDQyxNQUFNLEdBQUcsR0FBRztRQUN4QkgsVUFBVSxDQUFDLE9BQU8sQ0FBQztRQUNuQkYsR0FBR0ksTUFBTSxDQUFDRSxPQUFPLENBQUMsQ0FBQ0MsT0FBT0M7WUFDeEJOLFVBQVUsQ0FBQyxFQUFFSyxNQUFNRSxJQUFJLENBQUMsRUFBRUQsTUFBTVIsR0FBR0ksTUFBTSxDQUFDQyxNQUFNLEdBQUcsSUFBSSxNQUFNLElBQUksQ0FBQztRQUNwRTtRQUNBSCxVQUFVLENBQUMsRUFBRSxDQUFDO0lBQ2hCO0lBRUEsSUFBSUYsR0FBR1UsV0FBVyxDQUFDTCxNQUFNLEdBQUcsR0FBRztRQUM3QkgsVUFBVSxDQUFDLGNBQWMsQ0FBQztRQUMxQkYsR0FBR1UsV0FBVyxDQUFDSixPQUFPLENBQUMsQ0FBQ0s7WUFDdEJULFVBQVUsQ0FBQyxFQUFFUyxXQUFXQyxRQUFRLENBQUMsSUFBSSxFQUFFRCxXQUFXRSxPQUFPLENBQUMsTUFBTSxFQUFFRixXQUFXRyxJQUFJLENBQUNDLElBQUksQ0FBQyxJQUFJLEVBQUVKLFdBQVdHLElBQUksQ0FBQ0UsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUNySDtJQUNGO0lBRUEsSUFBSWhCLEdBQUdpQixVQUFVLENBQUNaLE1BQU0sR0FBRyxHQUFHO1FBQzVCSCxVQUFVLENBQUMsYUFBYSxDQUFDO1FBQ3pCRixHQUFHaUIsVUFBVSxDQUFDWCxPQUFPLENBQUMsQ0FBQ1k7WUFDckJoQixVQUFVLENBQUMsRUFBRWdCLFVBQVVDLE1BQU0sQ0FBQyxJQUFJLEVBQUVELFVBQVVFLE1BQU0sQ0FBQyxNQUFNLEVBQUVGLFVBQVVKLElBQUksQ0FBQ0MsSUFBSSxDQUFDLElBQUksRUFBRUcsVUFBVUosSUFBSSxDQUFDRSxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQzlHO0lBQ0Y7SUFFQSxJQUFJaEIsR0FBR3FCLFNBQVMsQ0FBQ2hCLE1BQU0sR0FBRyxHQUFHO1FBQzNCSCxVQUFVLENBQUMsWUFBWSxDQUFDO1FBQ3hCRixHQUFHcUIsU0FBUyxDQUFDZixPQUFPLENBQUMsQ0FBQ2dCO1lBQ3BCcEIsVUFBVSxDQUFDLEVBQUVvQixTQUFTYixJQUFJLENBQUMsSUFBSSxFQUFFYSxTQUFTQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ3JEO0lBQ0Y7SUFFQSxJQUFJdkIsR0FBR3dCLFdBQVcsRUFBRTtRQUNsQnRCLFVBQVUsQ0FBQyxjQUFjLENBQUM7UUFDMUJBLFVBQVUsQ0FBQyxFQUFFRixHQUFHd0IsV0FBVyxDQUFDLEVBQUUsQ0FBQztJQUNqQztJQUVBLElBQUl2QixTQUFTLFdBQVc7UUFDdEJDLFVBQVUsQ0FBQyxrU0FBa1MsQ0FBQztRQUM5U0EsVUFBVSxDQUFDLDhHQUE4RyxDQUFDO1FBQzFIQSxVQUFVLENBQUMsdUVBQXVFLENBQUM7SUFDckY7SUFFQSxJQUFJRCxTQUFTLGtCQUFrQjtRQUM3QkMsVUFBVSxDQUFDLDhSQUE4UixDQUFDO1FBQzFTQSxVQUFVLENBQUMsOEdBQThHLENBQUM7SUFDNUg7SUFFQSxJQUFJRCxTQUFTLHdCQUF3QjtRQUNuQ0MsVUFBVSxDQUFDLHFTQUFxUyxDQUFDO1FBQ2pUQSxVQUFVLENBQUMsOEdBQThHLENBQUM7SUFDNUg7SUFFQUEsVUFBVSxDQUFDLFVBQVUsQ0FBQztJQUV0QixPQUFPQTtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9saWIvaGVscGVyUHJvbXB0cy50cz9mNmI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRDdiB9IGZyb20gXCJAL3N0b3JlL2N2XCJcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1bW1hcnlQcm9tcHQoXG4gIGN2OiBUQ3YsXG4gIHR5cGU6IFwic3VtbWFyeVwiIHwgXCJqb2JEZXNjcmlwdGlvblwiIHwgXCJlZHVjYXRpb25EZXNjcmlwdGlvblwiXG4pIHtcbiAgbGV0IHByb21wdCA9IFwiXCJcblxuICBpZiAoY3Yucm9sZUFwcGx5aW5nKSB7XG4gICAgcHJvbXB0ICs9IGBSb2xlIEFwcGx5aW5nIEZvcjogJHtjdi5yb2xlQXBwbHlpbmd9XFxuYFxuICB9XG5cbiAgaWYgKGN2LnNraWxscy5sZW5ndGggPiAwKSB7XG4gICAgcHJvbXB0ICs9IGBTa2lsbHM6YFxuICAgIGN2LnNraWxscy5mb3JFYWNoKChza2lsbCwgaSkgPT4ge1xuICAgICAgcHJvbXB0ICs9IGAke3NraWxsLm5hbWV9JHtpID09PSBjdi5za2lsbHMubGVuZ3RoIC0gMSA/IFwiLlwiIDogXCIsXCJ9YFxuICAgIH0pXG4gICAgcHJvbXB0ICs9IGBcXG5gXG4gIH1cblxuICBpZiAoY3YuZXhwZXJpZW5jZXMubGVuZ3RoID4gMCkge1xuICAgIHByb21wdCArPSBgRXhwZXJpZW5jZXM6XFxuYFxuICAgIGN2LmV4cGVyaWVuY2VzLmZvckVhY2goKGV4cGVyaWVuY2UpID0+IHtcbiAgICAgIHByb21wdCArPSBgJHtleHBlcmllbmNlLnBvc2l0aW9ufSBhdCAke2V4cGVyaWVuY2UuY29tcGFueX0gZnJvbSAke2V4cGVyaWVuY2UuZGF0ZS5mcm9tfSB0byAke2V4cGVyaWVuY2UuZGF0ZS50b31cXG5gXG4gICAgfSlcbiAgfVxuXG4gIGlmIChjdi5lZHVjYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICBwcm9tcHQgKz0gYEVkdWNhdGlvbnM6XFxuYFxuICAgIGN2LmVkdWNhdGlvbnMuZm9yRWFjaCgoZWR1Y2F0aW9uKSA9PiB7XG4gICAgICBwcm9tcHQgKz0gYCR7ZWR1Y2F0aW9uLmRlZ3JlZX0gYXQgJHtlZHVjYXRpb24uc2Nob29sfSBmcm9tICR7ZWR1Y2F0aW9uLmRhdGUuZnJvbX0gdG8gJHtlZHVjYXRpb24uZGF0ZS50b31cXG5gXG4gICAgfSlcbiAgfVxuXG4gIGlmIChjdi5sYW5ndWFnZXMubGVuZ3RoID4gMCkge1xuICAgIHByb21wdCArPSBgTGFuZ3VhZ2VzOlxcbmBcbiAgICBjdi5sYW5ndWFnZXMuZm9yRWFjaCgobGFuZ3VhZ2UpID0+IHtcbiAgICAgIHByb21wdCArPSBgJHtsYW5ndWFnZS5uYW1lfSBhdCAke2xhbmd1YWdlLmxldmVsfVxcbmBcbiAgICB9KVxuICB9XG5cbiAgaWYgKGN2LmRlc2NyaXB0aW9uKSB7XG4gICAgcHJvbXB0ICs9IGBEZXNjcmlwdGlvbjpcXG5gXG4gICAgcHJvbXB0ICs9IGAke2N2LmRlc2NyaXB0aW9ufVxcbmBcbiAgfVxuXG4gIGlmICh0eXBlID09PSBcInN1bW1hcnlcIikge1xuICAgIHByb21wdCArPSBgQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGFib3ZlLCBwbGVhc2Ugd3JpdGUgYSBzdW1tYXJ5IGRlc2NyaXB0aW9uIGZvciB0aGlzIHVzZXIgZm9yIHRoaXMgQ1YuIFVzZSBmaXJzdCBwZXJzb24gYW5kIHdyaXRlIGluIGEgcHJvZmVzc2lvbmFsIHRvbmUuIFRoZXJlIG1pZ2h0IGJlIGluc3RhbmNlcyB3aGVyZSB0aGUgdXNlciBhbHJlYWR5IHN0YXJ0ZWQgd3JpdGluZyBzb21ldGhpbmcgc28gaXQgaXMgeW91ciBqb2IgdG8gY29udGludWUgd2hlcmUgaGUgbGVmdCBvZiBhbmQgZG8gYW4gYW1hemluZyBqb2IuXFxuYFxuICAgIHByb21wdCArPSBgRG8gbm90IGZpeGF0ZSBhcyBtdWNoIGFib3V0IHByZXZpb3VzIGNvbXBhbmllcyBhbmQgYWJzdHJhY3QgaGlzIGV4cGVyaWVuY2UgYmFzZWQgb24gYWxsIGhpcyBqb2IgZXhwZXJpZW5jZXMuXFxuYFxuICAgIHByb21wdCArPSBgS2VlcCB0aGUgc3VtbWFyeSBzaG9ydCBhbmQgY29uY2lzZSBhbmQgZG8gbm90IGdvIG92ZXIgMy00IHBhcmFncmFwaHMuXFxuYFxuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwiam9iRGVzY3JpcHRpb25cIikge1xuICAgIHByb21wdCArPSBgQmFzZWQgb24gdGhlIGluZm9ybWF0aW9uIGFib3ZlLCBwbGVhc2Ugd3JpdGUgYSBqb2IgZGVzY3JpcHRpb24gZm9yIHRoaXMgdXNlciBmb3IgdGhpcyBDVi4gVXNlIGZpcnN0IHBlcnNvbiBhbmQgd3JpdGUgaW4gYSBwcm9mZXNzaW9uYWwgdG9uZS4gVGhlcmUgbWlnaHQgYmUgaW5zdGFuY2VzIHdoZXJlIHRoZSB1c2VyIGFscmVhZHkgc3RhcnRlZCB3cml0aW5nIHNvbWV0aGluZyBzbyBpdCBpcyB5b3VyIGpvYiB0byBjb250aW51ZSB3aGVyZSBoZSBsZWZ0IG9mIGFuZCBkbyBhbiBhbWF6aW5nIGpvYi5cXG5gXG4gICAgcHJvbXB0ICs9IGBEbyBub3QgZml4YXRlIGFzIG11Y2ggYWJvdXQgcHJldmlvdXMgY29tcGFuaWVzIGFuZCBhYnN0cmFjdCBoaXMgZXhwZXJpZW5jZSBiYXNlZCBvbiBhbGwgaGlzIGpvYiBleHBlcmllbmNlcy5cXG5gXG4gIH1cblxuICBpZiAodHlwZSA9PT0gXCJlZHVjYXRpb25EZXNjcmlwdGlvblwiKSB7XG4gICAgcHJvbXB0ICs9IGBCYXNlZCBvbiB0aGUgaW5mb3JtYXRpb24gYWJvdmUsIHBsZWFzZSB3cml0ZSBhbiBlZHVjYXRpb24gZGVzY3JpcHRpb24gZm9yIHRoaXMgdXNlciBmb3IgdGhpcyBDVi4gVXNlIGZpcnN0IHBlcnNvbiBhbmQgd3JpdGUgaW4gYSBwcm9mZXNzaW9uYWwgdG9uZS4gVGhlcmUgbWlnaHQgYmUgaW5zdGFuY2VzIHdoZXJlIHRoZSB1c2VyIGFscmVhZHkgc3RhcnRlZCB3cml0aW5nIHNvbWV0aGluZyBzbyBpdCBpcyB5b3VyIGpvYiB0byBjb250aW51ZSB3aGVyZSBoZSBsZWZ0IG9mIGFuZCBkbyBhbiBhbWF6aW5nIGpvYi5cXG5gXG4gICAgcHJvbXB0ICs9IGBEbyBub3QgZml4YXRlIGFzIG11Y2ggYWJvdXQgcHJldmlvdXMgY29tcGFuaWVzIGFuZCBhYnN0cmFjdCBoaXMgZXhwZXJpZW5jZSBiYXNlZCBvbiBhbGwgaGlzIGpvYiBleHBlcmllbmNlcy5cXG5gXG4gIH1cblxuICBwcm9tcHQgKz0gYFJlc3BvbnNlOiBgXG5cbiAgcmV0dXJuIHByb21wdFxufVxuIl0sIm5hbWVzIjpbImdldFN1bW1hcnlQcm9tcHQiLCJjdiIsInR5cGUiLCJwcm9tcHQiLCJyb2xlQXBwbHlpbmciLCJza2lsbHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwic2tpbGwiLCJpIiwibmFtZSIsImV4cGVyaWVuY2VzIiwiZXhwZXJpZW5jZSIsInBvc2l0aW9uIiwiY29tcGFueSIsImRhdGUiLCJmcm9tIiwidG8iLCJlZHVjYXRpb25zIiwiZWR1Y2F0aW9uIiwiZGVncmVlIiwic2Nob29sIiwibGFuZ3VhZ2VzIiwibGFuZ3VhZ2UiLCJsZXZlbCIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/helperPrompts.ts\n");

/***/ }),

/***/ "(api)/./pages/api/generate.ts":
/*!*******************************!*\
  !*** ./pages/api/generate.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _lib_helperPrompts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/helperPrompts */ \"(api)/./lib/helperPrompts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nasync function handler(req, res) {\n    if (!req.cookies.apiKey && !process.env.OPENAI_API_KEY === undefined) {\n        res.status(401).json({\n            error: \"No API key provided\"\n        });\n        res.end();\n        return;\n    }\n    if (req.method === \"POST\") {\n        const openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            apiKey: process.env.OPENAI_API_KEY || req.cookies.apiKey\n        });\n        const { cv, type } = req.body;\n        if (!cv || !type) {\n            res.status(400).json({\n                error: \"Bad Request\"\n            });\n            return;\n        }\n        try {\n            const stream = openai.beta.chat.completions.stream({\n                model: \"gpt-4\",\n                messages: [\n                    {\n                        role: \"assistant\",\n                        content: \"Your job is to write an SEO and conversion optimized CV. The user will prompt what exactly he wants your help with.\"\n                    },\n                    {\n                        role: \"user\",\n                        content: (0,_lib_helperPrompts__WEBPACK_IMPORTED_MODULE_1__.getSummaryPrompt)(cv, type)\n                    }\n                ],\n                stream: true,\n                max_tokens: 4000\n            });\n            stream.on(\"content\", (delta)=>{\n                res.write(delta);\n            });\n            const chatCompletion = await stream.finalChatCompletion();\n            res.write(\"END STREAM\");\n            res.write(chatCompletion);\n            res.status(200).end();\n        } catch (error) {\n            console.error(\"Error:\", error);\n            res.status(500).json({\n                error: \"Internal Server Error\"\n            });\n        }\n    } else {\n        res.status(405).json({\n            error: \"Method Not Allowed\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2VuZXJhdGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFMkI7QUFFMkI7QUFFL0MsTUFBTUUsVUFBVSxTQUFRO0FBQ3hCLE1BQU1DLFVBQVUsZ0JBQWU7QUFFdkIsZUFBZUMsUUFDNUJDLEdBQW1CLEVBQ25CQyxHQUFvQjtJQUVwQixJQUFJLENBQUNELElBQUlFLE9BQU8sQ0FBQ0MsTUFBTSxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxLQUFLQyxXQUFXO1FBQ3BFTixJQUFJTyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBc0I7UUFDcERULElBQUlVLEdBQUc7UUFDUDtJQUNGO0lBRUEsSUFBSVgsSUFBSVksTUFBTSxLQUFLLFFBQVE7UUFDekIsTUFBTUMsU0FBUyxJQUFJbEIsOENBQU1BLENBQUM7WUFDeEJRLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJTixJQUFJRSxPQUFPLENBQUNDLE1BQU07UUFDMUQ7UUFDQSxNQUFNLEVBQ0pXLEVBQUUsRUFDRkMsSUFBSSxFQUNMLEdBR0dmLElBQUlnQixJQUFJO1FBRVosSUFBSSxDQUFDRixNQUFNLENBQUNDLE1BQU07WUFDaEJkLElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBYztZQUM1QztRQUNGO1FBRUEsSUFBSTtZQUNGLE1BQU1PLFNBQVNKLE9BQU9LLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxXQUFXLENBQUNILE1BQU0sQ0FBQztnQkFDakRJLE9BQU87Z0JBQ1BDLFVBQVU7b0JBQ1I7d0JBQ0VDLE1BQU07d0JBQ05DLFNBQ0U7b0JBQ0o7b0JBQ0E7d0JBQ0VELE1BQU07d0JBQ05DLFNBQVM1QixvRUFBZ0JBLENBQUNrQixJQUFJQztvQkFDaEM7aUJBQ0Q7Z0JBQ0RFLFFBQVE7Z0JBQ1JRLFlBQVk7WUFDZDtZQUVBUixPQUFPUyxFQUFFLENBQUMsV0FBVyxDQUFDQztnQkFDcEIxQixJQUFJMkIsS0FBSyxDQUFDRDtZQUNaO1lBRUEsTUFBTUUsaUJBQWlCLE1BQU1aLE9BQU9hLG1CQUFtQjtZQUN2RDdCLElBQUkyQixLQUFLLENBQUM7WUFDVjNCLElBQUkyQixLQUFLLENBQUNDO1lBQ1Y1QixJQUFJTyxNQUFNLENBQUMsS0FBS0csR0FBRztRQUNyQixFQUFFLE9BQU9ELE9BQU87WUFDZHFCLFFBQVFyQixLQUFLLENBQUMsVUFBVUE7WUFDeEJULElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBd0I7UUFDeEQ7SUFDRixPQUFPO1FBQ0xULElBQUlPLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUNyRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtcGxhdGUvLi9wYWdlcy9hcGkvZ2VuZXJhdGUudHM/MjY1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiXG5pbXBvcnQgeyBUQ3YgfSBmcm9tIFwiQC9zdG9yZS9jdlwiXG5pbXBvcnQgT3BlbkFpIGZyb20gXCJvcGVuYWlcIlxuXG5pbXBvcnQgeyBnZXRTdW1tYXJ5UHJvbXB0IH0gZnJvbSBcIkAvbGliL2hlbHBlclByb21wdHNcIlxuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCJcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICBpZiAoIXJlcS5jb29raWVzLmFwaUtleSAmJiAhcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgPT09IHVuZGVmaW5lZCkge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiTm8gQVBJIGtleSBwcm92aWRlZFwiIH0pXG4gICAgcmVzLmVuZCgpXG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFpKHtcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfHwgcmVxLmNvb2tpZXMuYXBpS2V5LFxuICAgIH0pXG4gICAgY29uc3Qge1xuICAgICAgY3YsXG4gICAgICB0eXBlLFxuICAgIH06IHtcbiAgICAgIGN2OiBUQ3ZcbiAgICAgIHR5cGU6IFwic3VtbWFyeVwiIHwgXCJqb2JEZXNjcmlwdGlvblwiIHwgXCJlZHVjYXRpb25EZXNjcmlwdGlvblwiXG4gICAgfSA9IHJlcS5ib2R5XG5cbiAgICBpZiAoIWN2IHx8ICF0eXBlKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkJhZCBSZXF1ZXN0XCIgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBvcGVuYWkuYmV0YS5jaGF0LmNvbXBsZXRpb25zLnN0cmVhbSh7XG4gICAgICAgIG1vZGVsOiBcImdwdC00XCIsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgICAgIFwiWW91ciBqb2IgaXMgdG8gd3JpdGUgYW4gU0VPIGFuZCBjb252ZXJzaW9uIG9wdGltaXplZCBDVi4gVGhlIHVzZXIgd2lsbCBwcm9tcHQgd2hhdCBleGFjdGx5IGhlIHdhbnRzIHlvdXIgaGVscCB3aXRoLlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBnZXRTdW1tYXJ5UHJvbXB0KGN2LCB0eXBlKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgIG1heF90b2tlbnM6IDQwMDAsXG4gICAgICB9KVxuXG4gICAgICBzdHJlYW0ub24oXCJjb250ZW50XCIsIChkZWx0YSkgPT4ge1xuICAgICAgICByZXMud3JpdGUoZGVsdGEpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBjaGF0Q29tcGxldGlvbiA9IGF3YWl0IHN0cmVhbS5maW5hbENoYXRDb21wbGV0aW9uKClcbiAgICAgIHJlcy53cml0ZShcIkVORCBTVFJFQU1cIilcbiAgICAgIHJlcy53cml0ZShjaGF0Q29tcGxldGlvbilcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5lbmQoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIiB9KVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIk1ldGhvZCBOb3QgQWxsb3dlZFwiIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQWkiLCJnZXRTdW1tYXJ5UHJvbXB0IiwicnVudGltZSIsImR5bmFtaWMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29va2llcyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsInVuZGVmaW5lZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImVuZCIsIm1ldGhvZCIsIm9wZW5haSIsImN2IiwidHlwZSIsImJvZHkiLCJzdHJlYW0iLCJiZXRhIiwiY2hhdCIsImNvbXBsZXRpb25zIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwibWF4X3Rva2VucyIsIm9uIiwiZGVsdGEiLCJ3cml0ZSIsImNoYXRDb21wbGV0aW9uIiwiZmluYWxDaGF0Q29tcGxldGlvbiIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/generate.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0"], () => (__webpack_exec__("(api)/./node_modules/.pnpm/next@14.0.4_@babel+core@7.23.7_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();